{% extends 'base.html' %}

{% block title %}Add New Project{% endblock %}

<!-- Konten Halaman  -->

<!-- Modifikasi di sini -->
{% block content %}

<h4> Tambah Proyek Baru</h4> 
<div class="row">
    <div class="col-xl">
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0"></h5>
                <small class="text-muted float-end"></small>
            </div>
            <div class="card-body">
                <form id="project-form">
                    <div class="mb-3">
                        <label class="form-label" for="basic-default-fullname">Nama Proyek</label>
                        <input type="text" class="form-control" id="basic-default-fullname" name="nama_proyek"
                            placeholder="Penilaian Kinerja" />
                    </div>
                    <div class="mb-3">
                        <label class="form-label" for="basic-default-message">Deskripsi Proyek</label>
                        <textarea id="basic-default-message" class="form-control" name="deskripsi_proyek"
                            placeholder="Deskripsi Proyek"></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="flatpickr-range" class="form-label">Periode Partisipan</label>
                        <input type="text" class="form-control" name="periode_mulai" placeholder="YYYY-MM-DD to YYYY-MM-DD"
                            id="flatpickr-range" />
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label" for="basic-default-respondents">Jumlah Responden</label>
                        <input type="number" class="form-control" id="basic-default-respondents" name="jumlah_responden" placeholder="Masukan jumlah responden yang akan berpartisipasi" />
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label" for="num-criteria">Jumlah Kriteria</label>
                        <input type="number" class="form-control" id="num-criteria" name="jumlah_kriteria" placeholder="Masukan jumlah kriteria yang akan dinilai" />
                    </div>
                    
                    <div class="card mt-4" id="criteria-card">
                        <div class="card-body">
                            <div id="criteria-container"></div>
                        </div>
                    </div><br />

                    <button type="submit" class="btn btn-danger" style="margin-right: 10px;">Reset</button>  
                    <button type="submit" class="btn btn-primary">Simpan</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript untuk menambahkan textbox sesuai jumlah kriteria -->
<script>
    // Tunggu sampai DOM selesai dimuat
    document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('criteria-card').style.visibility = 'hidden'
        var numCriteriaInput = document.getElementById('num-criteria');
        var criteriaContainer = document.getElementById('criteria-container');
        var criteriaCard = document.getElementById('criteria-card'); // Card untuk kriteria

        // Listener untuk input jumlah kriteria
        numCriteriaInput.addEventListener('input', function () {
            var numCriteria = parseInt(numCriteriaInput.value) ||
                0; // Menghindari NaN jika input kosong
            criteriaContainer.innerHTML = ''; // Bersihkan input sebelumnya

            // Menambah textbox sesuai jumlah kriteria
            for (var i = 0; i < numCriteria; i++) {
                var inputGroup = document.createElement('div');
                inputGroup.classList.add('mb-3'); // Memberikan jarak antar input

                var label = document.createElement('label');
                label.classList.add('form-label');
                label.textContent = 'Kriteria ' + (i + 1);
                inputGroup.appendChild(label);

                var input = document.createElement('input');
                input.type = 'text';
                input.classList.add('form-control');
                input.placeholder = 'Masukkan Kriteria ' + (i + 1);
                inputGroup.appendChild(input);

                criteriaContainer.appendChild(inputGroup);
            }

            // Menampilkan card kriteria hanya jika ada kriteria yang dimasukkan
            if (numCriteria > 0) {
                document.getElementById('criteria-card').style.visibility = 'visible'
                criteriaCard.style.display = 'block'; // Menampilkan card kriteria
            } else {
                criteriaCard.style.display = 'none'; // Menyembunyikan card jika tidak ada kriteria
            }
        });
    });


    
</script>

{% endblock %}